(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function o(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=a(t);if(n){var i=a(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},i.apply(this,arguments)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var d=document.querySelector(".card-carousel");document.querySelector(".card-carousel + .card-controller"),new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(d,e);var l=o(d);function d(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return s(this,d),(n=l.call(this,e)).container=e,n.controllerElement=r,n.cards=e.querySelectorAll(".card"),n.centerIndex=(n.cards.length-1)/2,n.cardWidth=n.cards[0].offsetWidth/n.container.offsetWidth*100,n.xScale={},window.addEventListener("resize",n.updateCardWidth.bind(c(n))),n.controllerElement&&n.controllerElement.addEventListener("keydown",n.controller.bind(c(n))),n.build(),i((t=c(n),a(d.prototype)),"getDistance",t).call(t,n.moveCards.bind(c(n))),n}return u(d,[{key:"updateCardWidth",value:function(){this.cardWidth=this.cards[0].offsetWidth/this.container.offsetWidth*100,this.build()}},{key:"build",value:function(){for(var e=0;e<this.cards.length;e++){var t=e-this.centerIndex,n=this.calcScale(t),r=this.calcScale2(t),o=-Math.abs(e-this.centerIndex),c=this.calcPos(t,r);this.xScale[t]=this.cards[e],this.updateCards(this.cards[e],{x:t,scale:n,leftPos:c,zIndex:o})}}},{key:"controller",value:function(e){var r=function(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},this.xScale);if(39===e.keyCode)for(var o in this.xScale){r[parseInt(o)-1<-this.centerIndex?this.centerIndex:parseInt(o)-1]=this.xScale[o]}if(37==e.keyCode)for(var c in this.xScale){r[parseInt(c)+1>this.centerIndex?-this.centerIndex:parseInt(c)+1]=this.xScale[c]}for(var i in this.xScale=r,r){var a=this.calcScale(i),s=this.calcScale2(i),l=this.calcPos(i,s),u=-Math.abs(i);this.updateCards(this.xScale[i],{x:i,scale:a,leftPos:l,zIndex:u})}}},{key:"calcPos",value:function(e,t){return e<0?(100*t-this.cardWidth)/2:100-(100*t+this.cardWidth)/2}},{key:"updateCards",value:function(e,t){(t.x||0==t.x)&&e.setAttribute("data-x",t.x),(t.scale||0==t.scale)&&(e.style.transform="scale(".concat(t.scale,")"),0==t.scale?e.style.opacity=t.scale:e.style.opacity=1),t.leftPos&&(e.style.left="".concat(t.leftPos,"%")),(t.zIndex||0==t.zIndex)&&(0==t.zIndex?e.classList.add("highlight"):e.classList.remove("highlight"),e.style.zIndex=t.zIndex)}},{key:"calcScale2",value:function(e){return e<=0?1- -.2*e:e>0?1-.2*e:void 0}},{key:"calcScale",value:function(e){var t=1-.2*Math.pow(e,2);return t<=0?0:t}},{key:"checkOrdering",value:function(e,t,n){var r=parseInt(e.dataset.x),o=Math.round(n),c=t;t!==t+o&&(t+o>r?t+o>this.centerIndex&&(c=t+o-1-this.centerIndex-o-this.centerIndex):t+o<r&&t+o<-this.centerIndex&&(c=t+o+1+this.centerIndex-o+this.centerIndex),this.xScale[c+o]=e);var i=-Math.abs(c+o);return this.updateCards(e,{zIndex:i}),c}},{key:"moveCards",value:function(e){var t;if(null!=e)this.container.classList.remove("smooth-return"),t=e.x/250;else for(var n in this.container.classList.add("smooth-return"),t=0,this.xScale)this.updateCards(this.xScale[n],{x:n,zIndex:Math.abs(Math.abs(n)-this.centerIndex)});for(var r=0;r<this.cards.length;r++){var o=this.checkOrdering(this.cards[r],parseInt(this.cards[r].dataset.x),t),c=this.calcScale(o+t),i=this.calcScale2(o+t),a=this.calcPos(o+t,i);this.updateCards(this.cards[r],{scale:c,leftPos:a})}}}]),d}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;s(this,e),this.target=t}return u(e,[{key:"event",value:function(e){var t;this.target.addEventListener("mousedown",(function(n){function r(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",r),document.removeEventListener("mouseleave",r),t(null)}n.preventDefault(),t=e(n),window.addEventListener("mousemove",t),document.addEventListener("mouseleave",r),window.addEventListener("mouseup",r)})),this.target.addEventListener("touchstart",(function(n){function r(){window.removeEventListener("touchmove",t),window.removeEventListener("touchend",r),t(null)}t=e(n),window.addEventListener("touchmove",t),window.addEventListener("touchend",r),document.body.addEventListener("mouseleave",r)}))}},{key:"getDistance",value:function(e){this.event((function(t){var n,r;return"touches"in t?(n=t.touches[0].clientX,r=t.touches[0].clientY):(n=t.clientX,r=t.clientY),function(t){return e(null===t?null:"touches"in t?{x:t.touches[0].clientX-n,y:t.touches[0].clientY-r}:{x:t.clientX-n,y:t.clientY-r})}}))}}]),e}()))(d)})();